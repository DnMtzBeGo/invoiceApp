<form [formGroup]="commodity">
  <div class="grid">
    <mat-form-field appearance="outline" floatLabel="always">
      <mat-label>* Bienes Transportados</mat-label>
      <input
        formControlName="bienesTransportados"
        autocomplete="off"
        type="search"
        matInput
        [matAutocomplete]="bienesTransportadosRef"
      />
      <mat-autocomplete
        #bienesTransportadosRef="matAutocomplete"
        [displayWith]="getBienesTransportadosText.bind(this)"
      >
        <mat-option
          *ngFor="let option of filteredBienesTransportados"
          [value]="option.code"
        >
          {{ option.code }} - {{ option.description }}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
    <!-- input es de tipo ferroviario -->
    <!-- <mat-form-field appearance="outline" floatLabel="always">
      <mat-label>Clave STCC (Opcional)</mat-label>
      <input
        matInput
        name="claveSCTT"
        placeholder=""
        formControlName="claveSCTT"
        [value]=""
      />
    </mat-form-field> -->

    <mat-form-field appearance="outline" floatLabel="always">
      <mat-label>* Clave Unidad</mat-label>
      <input
        formControlName="claveUnidad"
        autocomplete="off"
        type="search"
        matInput
        [matAutocomplete]="claveUnidadRef"
      />
      <mat-autocomplete
        #claveUnidadRef="matAutocomplete"
        [displayWith]="getClaveUnidadText.bind(this)"
      >
        <mat-option
          *ngFor="let option of filteredClaveUnidad"
          [value]="option.clave"
        >
          {{ option.clave }} - {{ option.nombre }}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>

    <mat-form-field appearance="outline" floatLabel="always">
      <mat-label>Cantidad</mat-label>
      <input
        matInput
        name="cantidad"
        placeholder=""
        type="number"
        formControlName="cantidad"
        [value]=""
      />
    </mat-form-field>

    <mat-form-field appearance="outline" floatLabel="always">
      <mat-label>Dimensiones (Opcional)</mat-label>
      <input
        matInput
        name="dimensiones"
        placeholder=""
        formControlName="dimensiones"
        [value]=""
      />
      <mat-error
        >Las dimensiones deben de tener el fomato '#/#/#' con terminación cm o
        plg. Ejemplo: 10/10/10cm</mat-error
      >
    </mat-form-field>
    <mat-form-field appearance="outline" floatLabel="always">
      <mat-label>Peso (Kg)</mat-label>
      <input
        matInput
        name="peso"
        placeholder=""
        type="number"
        formControlName="peso"
        [value]=""
      />
    </mat-form-field>
    <mat-form-field appearance="outline" floatLabel="always">
      <mat-label>Valor Mercancía (Opcional))</mat-label>
      <input
        matInput
        name="valorMercancia"
        placeholder=""
        type="number"
        formControlName="valorMercancia"
        [value]=""
      />
    </mat-form-field>
    <mat-form-field appearance="outline" floatLabel="always">
      <mat-label>Moneda (Opcional)</mat-label>
      <mat-select
        formControlName="moneda"
        placeholder="Seleciona una opción"
        class="no-custom-theme"
        name="moneda"
      >
        <mat-option *ngFor="let option of dataCoin" [value]="option.clave">
          {{ option.clave }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <div>
      <p>Material Peligroso</p>
      <mat-slide-toggle formControlName="materialPeligroso"></mat-slide-toggle>
    </div>

    <mat-form-field
      *ngIf="commodity.value.materialPeligroso"
      appearance="outline"
      floatLabel="always"
    >
      <mat-label>* Clave Material Peligroso</mat-label>
      <input
        formControlName="claveMaterialPeligroso"
        autocomplete="off"
        type="search"
        matInput
        [matAutocomplete]="claveMaterialPeligrosoRef"
      />
      <mat-autocomplete
        #claveMaterialPeligrosoRef="matAutocomplete"
        [displayWith]="getMaterialPeligrosoText.bind(this)"
      >
        <mat-option
          *ngFor="let option of filteredMaterialPeligroso"
          [value]="option.clave"
        >
          {{ option.clave }} - {{ option.descripcion }}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>

    <mat-form-field
      *ngIf="commodity.value.materialPeligroso"
      appearance="outline"
      floatLabel="always"
    >
      <mat-label>Embalaje {{ commodity.value.embalaje }}</mat-label>
      <mat-select
        formControlName="embalaje"
        placeholder="Seleciona una opción"
        class="no-custom-theme"
        name="embalaje"
      >
        <mat-option *ngFor="let option of embalaje" [value]="option.clave">
          {{ option.clave }} - {{ option.descripcion }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <h6>Pedimentos</h6>
  <div class="grid">
    <mat-form-field appearance="outline" floatLabel="always">
      <mat-label>Pedimento</mat-label>
      <input
        matInput
        autocomplete="off"
        placeholder=""
        (keyup.enter)="addPedimento($event)"
        (keyup)="acceptOnlyNumbers($event)"
      />
    </mat-form-field>
  </div>
  <div class="grid">
    <table
      mat-table
      [dataSource]="dataSourcePedimento"
      class="cartaPorteTable"
      *ngIf="dataSourcePedimento.length > 0"
    >
      <ng-container matColumnDef="value">
        <th mat-header-cell *matHeaderCellDef>Pedimento</th>
        <td mat-cell *matCellDef="let element">{{ element.pedimento }}</td>
      </ng-container>

      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element; let i = index">
          <button
            type="button"
            mat-icon-button
            color="warn"
            (click)="removeData(i)"
          >
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        mat-row
        matRipple
        *matRowDef="let row; columns: displayedColumns"
      ></tr>
    </table>
  </div>
</form>
<mat-divider></mat-divider>
